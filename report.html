<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Report Garbage</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

<style>
body{
    font-family: 'Poppins', sans-serif;
    margin: 0;
    
}

/* PAGE LAYOUT */
.report-container{
    display: flex;
    min-height: 100vh;
}

/* LEFT INFO PANEL */
.left-panel{
    width: 35%;
    padding: 60px 40px;
    background: rgb(51, 201, 84);          /* ðŸ‘ˆ LEFT PANEL WHITE */
    color: rgb(245, 248, 246);
}



.left-panel h1{
    font-size: 36px;
}

.left-panel p{
    font-size: 16px;
    line-height: 1.6;
}

/* RIGHT FORM PANEL */
.form-panel{
    width: 65%;
   
    padding: 50px;
    border-radius: 30px 0 0 30px;
}

.form-panel h2{
    margin-bottom: 20px;
}

/* FORM */
form{
    max-width: 520px;
}

label{
    font-weight: 600;
    font-size: 15px;
    margin-top: 15px;
    display: block;
}

input, select, textarea{
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 15px;
}

textarea{
    resize: none;
    height: 100px;
}

/* LOCATION SUGGESTIONS */
#suggestions{
    border:1px solid #ccc;
    max-height:150px;
    overflow:auto;
    border-radius: 8px;
    margin-top: 5px;
}

#suggestions div{
    padding: 8px;
    cursor: pointer;
}

#suggestions div:hover{
    background: #f0fdf4;
}

/* BUTTON */
button{
    margin-top: 25px;
    padding: 14px;
    width: 100%;
    background: #16a34a;
    color: white;
    font-size: 18px;
    font-weight: bold;
    border: none;
    border-radius: 30px;
    cursor: pointer;
}

button:hover{
    background: #15803d;
}
</style>

<!-- ===== SAME OLD LOCATION API (NO CHANGE) ===== -->
<script>
function searchLocation() {
    let query = document.getElementById("location").value;

    if (query.length < 3) return;

    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`)
        .then(response => response.json())
        .then(data => {
            let list = document.getElementById("suggestions");
            list.innerHTML = "";

            data.forEach(place => {
                let div = document.createElement("div");
                div.innerText = place.display_name;

                div.onclick = () => {
                    document.getElementById("location").value = place.display_name;
                    list.innerHTML = "";
                };

                list.appendChild(div);
            });
        });
}
</script>

</head>
<body>

<div class="report-container">

    <!-- LEFT SIDE INFO -->
    <div class="left-panel">
        <h1>Report Garbage</h1>
        <p>
            Help us keep the city clean by reporting garbage problems.
            Your complaint will be forwarded to municipal authorities
            for quick action.
        </p>

        <p>âœ” Easy Reporting</p>
        <p>âœ” Correct Location</p>
        <p>âœ” Faster Resolution</p>
    </div>

    <!-- RIGHT SIDE FORM -->
    <div class="form-panel">

        <h2>Garbage Complaint Form</h2>

        <!-- NOTE: enctype added for photo upload -->
        <form method="POST" action="/submit" enctype="multipart/form-data">

            <label>Name</label>
            <input type="text" name="name" placeholder="Enter your name" required>

            <label>Location</label>
            <input type="text" id="location" name="location"
                   placeholder="Type area / locality..." onkeyup="searchLocation()" required>
            <div id="suggestions"></div>

            <label>Type of Garbage</label>
            <select name="garbage_type" required>
                <option value="">-- Select Garbage Type --</option>
                <option>Plastic Waste</option>
                <option>Wet Waste</option>
                <option>Dry Waste</option>
                <option>Construction Waste</option>
                <option>Other</option>
            </select>

            <label>Upload Photo</label>
            <input type="file" name="photo" accept="image/*">

            <label>Description</label>
            <textarea name="description" placeholder="Describe the issue" required></textarea>

            <button type="submit">Submit Complaint</button>
        </form>

    </div>
</div>

</body>
</html>
